# 노노그램 (Pixel Puzzle) - TODO

## ✅ 완료된 기능 (v3.0 대규모 UX 개편 - 2026-02-06)

### 버그 수정
- [x] **모든 퍼즐 해금 버튼 수정** — SettingsScreen이 localStorage 직접 조작 + reload하던 방식에서 App.jsx의 `setAppState()`를 통해 직접 state 업데이트하도록 변경. `onUnlockAll` 콜백 추가.

### 레이아웃 수정
- [x] **하단 네비 fixed** — `position: fixed; bottom: 0; left: 0; right: 0;` + safe-area 대응
- [x] **상단 탭 sticky** — `position: sticky; top: 0; z-index: 10;` + 배경색 추가
- [x] **홈 바디 하단 패딩** — 네비 높이(80px)만큼 패딩 추가
- [x] **탭 아이콘 추가** — 퍼즐/컬렉션 탭에 아이콘 표시

### 컬렉션 모드 완전 재설계 (Luna Story BIG 스타일)
- [x] **큰 그림 타일 시스템** — 하나의 큰 pixel art를 N×M 타일로 나누어 각 타일이 독립 퍼즐
- [x] **큰 그림 미리보기** — Canvas 기반, 완료 타일은 컬러, 미완료는 어두운 실루엣
- [x] **타일 그리드** — 클릭 가능한 타일 버튼, 완료 시 미니 프리뷰 표시
- [x] **진행률 표시** — 프로그레스 바 + "N/M" 텍스트
- [x] **4개 컬렉션 데이터** — 하트(3×3, 5×5), 고양이(4×4, 5×5), 꽃(3×3, 10×10), 로켓(3×3, 10×10)
- [x] **컬렉션 게임 전용 화면** — CollectionGameScreen 컴포넌트
- [x] **컬렉션 진행 상태 저장** — localStorage `nonogram_collection` 키

### 멀티컬러 노노그램
- [x] **solution 배열** — 0=빈칸, 1+=색상 인덱스
- [x] **색상 팔레트** — 각 컬렉션마다 3-5가지 색상
- [x] **색상별 단서 표시** — 숫자 옆에 해당 색상 도트
- [x] **색상 선택 UI** — 하단 색상 팔레트 바 (탭해서 선택)
- [x] **Canvas 멀티컬러 렌더링** — 각 색상 인덱스마다 다른 fillStyle
- [x] **자동 X 채우기** — 멀티컬러 행/열 완성 시 자동 X
- [x] **기존 레벨 호환** — 기존 50개 레벨은 단색 유지

## ✅ 이전 완료 기능 (v2.0)

### Critical 수정
- [x] 셀 하나 채우기 불가 수정 (드래그 threshold)
- [x] 완료 줄 자동 X 표시 (연쇄 효과)

### Major Features
- [x] 라이프 시스템 (3개, 게임 오버)
- [x] 힌트 시스템 (글로벌, 광고/구매 placeholder)
- [x] 별점 시스템 (시간 기준 ⭐⭐⭐)
- [x] 난이도별 첫 레벨 해금
- [x] 시드 기반 랜덤 퍼즐

### UI/UX 리디자인
- [x] 모든 이모지 → SVG 아이콘
- [x] CSS 변수 기반 다크모드
- [x] 카드 스타일 레이아웃
- [x] 사운드/햅틱 피드백

## ✅ 품질 개선 (v3.1 장인정신 - 2026-02-07)

### 게임플레이 개선
- [x] **틀린 셀 빨간 X 항상 표시** — showMistakes 설정 토글 제거, 기본 동작으로 변경
- [x] **X 표시된 셀 보호** — fill 모드에서 X(2)인 셀 탭 시 무시 (목숨 차감 방지)
- [x] **단서 0인 행/열 자동 X** — 게임 시작 시 rowClues/colClues가 [0]이면 해당 행/열 전체를 X(2)로 채움
- [x] **퍼즐 영역 크기 최적화** — 패딩 줄이기, 단서 영역 동적 축소, 화면 너비 거의 100% 활용
- [x] **큰 퍼즐(10x10+) 줌 버튼 추가** — +/- 버튼으로 확대/축소, 기존 핀치줌/더블탭/패닝 유지

### UI/UX 폴리싱
- [x] **터치 타겟 최소 44px** — 확인 및 유지
- [x] **완료된 행/열 시각적 피드백 강화** — completedRowBg 불투명도 증가
- [x] **진행률 바** — 그라데이션 + 둥근 끝 (이미 적용됨)
- [x] **모달 디자인 개선** — 테두리 추가, 그림자 강화
- [x] **라이트/다크 모드 대비** — 확인 완료

## ✅ 피드백 반영 (v3.2 - 2026-02-07)

### 게임플레이
- [x] **드래그 중 틀린 셀 → 라이프 감소 + X 처리** — FILL_CELL에서 틀린 셀도 라이프 차감 (이미 X/1인 셀은 무시)
- [x] **게임오버 시 광고 부활 (1회)** — REVIVE action 추가, 라이프 1개 복구, 게임당 1회 제한

### UI/UX
- [x] **줌 버튼 제거** — +/- 버튼 삭제 (핀치줌/더블탭은 유지)
- [x] **게임 영역 UI 개편** — 헤더/프로그레스/컨트롤 콤팩트화, 캔버스 영역 최대화
- [x] **단서 텍스트 크기 통일** — 퍼즐 크기 기준 고정 (5×5:12px, 8×8:11px, 10×10:10px, 15×15:9px)
- [x] **완료 레벨 미니 퍼즐 아트** — 레벨 목록에서 완료 레벨은 solution 미니 그리드 + 별 + 시간 표시

## ✅ UX 대개편 (v3.3 - 2026-02-07)

### 핀치줌/더블탭 완전 제거
- [x] GameCanvas.jsx — zoomRef, zoomLevel, lastTapRef, needsZoom 관련 코드 전부 삭제
- [x] handleWrapperTouchStart/Move/End, getTouchDist, applyTransform 삭제
- [x] wrapper의 onTouchStart/Move/End 핸들러 및 .zoomable 클래스 제거
- [x] zoom-indicator, zoom-hint JSX 제거
- [x] CollectionGameScreen MonoCanvas에서도 동일하게 제거
- [x] CSS에서 .zoomable, .zoom-indicator, .zoom-hint 스타일 삭제

### 실행취소/다시실행 버튼 제거
- [x] GameScreen.jsx — Undo, Redo 버튼 JSX 삭제, 관련 import 정리
- [x] CollectionGameScreen.jsx — 동일하게 Undo, Redo 버튼 삭제
- [x] useGame.js — export에서 undo, redo 제거 (reducer는 유지)
- [x] App.jsx — onUndo, onRedo props 제거

### 컨트롤러 모드 구현
- [x] ControllerPad.jsx 컴포넌트 생성 (십자키 + 채우기/X 버튼)
- [x] 길게 누르면 연속 이동 (400ms delay → 120ms interval)
- [x] GameCanvas에 cursor 표시 (빨간 테두리 + 하이라이트 배경)
- [x] 컨트롤러 모드에서 캔버스 터치 비활성화
- [x] 터치/컨트롤러 모드 전환 토글 버튼 (하단)
- [x] GameScreen과 CollectionGameScreen 모두 적용
- [x] TouchIcon, ControllerIcon SVG 아이콘 추가

### 퍼즐 목록 아코디언 UI
- [x] 섹션 헤더 탭 → 접기/펼치기 토글
- [x] 완료된 섹션 기본 접힘, 진행 중인 섹션 기본 펼침
- [x] 섹션별 진행률 표시 (완료/전체)
- [x] 화살표(chevron) 아이콘으로 상태 표시
- [x] 부드러운 애니메이션 (max-height transition)

## ✅ 품질 개선 + 버그 수정 (v3.4 사이클 3 - 2026-02-07)

### Auto-X 개선
- [x] **FILL_CELL에 자동 X 적용** — 드래그 중에도 행/열 완성 시 즉시 자동 X 채우기 (useGame.js + CollectionGameScreen)

### 컨트롤러 모드 최적화
- [x] **컨트롤러 패드 컴팩트화** — dpad 버튼 52px→46px, 패딩/갭 최소화, 퍼즐 영역 확대
- [x] **게임 헤더 더 콤팩트하게** — padding 6px→4px

### 게임 완료 모달 개선
- [x] **완성된 그림 컬러 표시** — puzzle.solution 기반 미니 픽셀아트 렌더링
- [x] **크기별 컬러 적용** — 5x5:#22c55e, 8x8:#6c5ce7, 10x10:#a855f7, 15x15:#f97316
- [x] **컬렉션 게임 완료 모달에도 동일 적용**

### 퍼즐 데이터 품질 검수
- [x] **15x15 퍼즐 6개 수정** — 유니콘, 로봇, 에펠탑, 자유의 여신상, 열기구, 별보는 여우
- [x] **모든 15x15 퍼즐 30~70% 채움률 확인** — 전체 15개 모두 통과

### 홈 화면 간소화
- [x] **통계 카드 → 한줄 stats-line** — "75 퍼즐 · N% 완료 · 💡N" 형식
- [x] **힌트 충전 → 모달로 이동** — 힌트 아이콘 탭 시 모달 열림
- [x] **퍼즐 목록 상단 근접** — 불필요한 카드 제거로 스크롤 감소

## 📋 향후 TODO

### 기능
- [ ] 실제 광고 SDK 연동 (AdMob 등)
- [ ] 실제 인앱 구매 연동
- [ ] 게임 저장/복원 (중간 이탈 시)
- [ ] 일일 챌린지 퍼즐
- [ ] 더 많은 컬렉션 (크리스마스, 바다, 음식 등)
- [ ] 더 큰 컬렉션 (5×5 타일 그리드 = 25개 퍼즐)
- [ ] 소셜 공유 (완료 결과)
- [ ] 리더보드

### 기술
- [ ] PWA 지원 (오프라인 플레이)
- [ ] 성능 최적화 (대형 그리드)
- [ ] 접근성 개선
- [ ] E2E 테스트
