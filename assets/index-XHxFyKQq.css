*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}:root{--primary: #3182f6;--primary-dark: #1b64da;--bg: #f2f4f6;--surface: #ffffff;--text: #191f28;--text-secondary: #8b95a1;--text-tertiary: #b0b8c1;--border: #e5e8eb;--success: #00c471;--danger: #ef4444;--safe-bottom: env(safe-area-inset-bottom, 0px)}html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;background:var(--bg);color:var(--text);overflow:hidden;touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-font-smoothing:antialiased}#root{height:100%}.home-screen{display:flex;flex-direction:column;height:100%;max-width:500px;margin:0 auto;background:var(--bg);overflow-y:auto;-webkit-overflow-scrolling:touch}.home-header{text-align:center;padding:48px 20px 24px;background:var(--surface);border-bottom:1px solid var(--border)}.app-title{font-size:28px;font-weight:800;letter-spacing:-.5px}.app-subtitle{font-size:14px;color:var(--text-secondary);margin-top:4px}.stats-bar{display:flex;justify-content:space-around;padding:20px;margin:16px 20px;background:var(--surface);border-radius:16px;box-shadow:0 1px 3px #0000000a;animation:statsSlideIn .4s cubic-bezier(.16,1,.3,1) both;animation-delay:.1s}@keyframes statsSlideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.stat{display:flex;flex-direction:column;align-items:center;gap:4px}.stat-value{font-size:22px;font-weight:800;color:var(--primary)}.stat-label{font-size:12px;color:var(--text-secondary)}.home-body{flex:1;padding-bottom:40px}.level-section-group{margin:0 20px 24px;animation:sectionFadeIn .4s cubic-bezier(.16,1,.3,1) both}.level-section-group:nth-child(2){animation-delay:.15s}.level-section-group:nth-child(3){animation-delay:.25s}.level-section-group:nth-child(4){animation-delay:.35s}.level-section-group:nth-child(5){animation-delay:.45s}@keyframes sectionFadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}.section-title{font-size:14px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:6px}.section-size{font-size:12px;opacity:.6;font-weight:500}.level-row{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}.level-btn{aspect-ratio:1;border:none;border-radius:12px;background:var(--surface);font-size:15px;font-weight:700;cursor:pointer;transition:all .2s cubic-bezier(.25,.46,.45,.94);box-shadow:0 1px 3px #0000000f;color:var(--text);display:flex;align-items:center;justify-content:center}@media(hover:hover){.level-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.level-btn.completed:hover{box-shadow:0 4px 16px #00c4714d}.level-btn.current:hover{box-shadow:0 4px 20px #3182f680}}.level-btn:active:not(:disabled){transform:scale(.92);transition-duration:.1s}.level-btn.completed{background:var(--success);color:#fff;box-shadow:0 2px 8px #00c47140}.level-btn.current{background:var(--primary);color:#fff;box-shadow:0 2px 12px #3182f666;animation:pulse-btn 2s ease-in-out infinite}.level-btn.locked{background:var(--bg);color:var(--text-tertiary);cursor:not-allowed;box-shadow:none;font-size:12px}@keyframes pulse-btn{0%,to{box-shadow:0 2px 12px #3182f666}50%{box-shadow:0 2px 20px #3182f699}}.game-screen{display:flex;flex-direction:column;height:100%;max-width:500px;margin:0 auto;background:var(--bg)}.game-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:var(--surface);border-bottom:1px solid var(--border);gap:12px}.back-btn{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:none;border:none;cursor:pointer;border-radius:12px;color:var(--text);flex-shrink:0;transition:background .15s}.back-btn:active{background:var(--bg)}.level-info{display:flex;flex-direction:column;align-items:center;gap:2px;flex:1;min-width:0}.level-number{font-size:16px;font-weight:700;white-space:nowrap}.puzzle-name{font-weight:500;color:var(--text-secondary)}.level-size{font-size:12px;color:var(--text-secondary)}.timer{font-size:16px;font-weight:600;color:var(--text-secondary);font-variant-numeric:tabular-nums;flex-shrink:0;width:52px;text-align:right}.game-container{flex:1;display:flex;justify-content:center;align-items:center;padding:12px 16px;overflow:hidden}.game-canvas{background:var(--surface);border-radius:16px;box-shadow:0 2px 12px #0000000f;touch-action:none;animation:canvasAppear .4s cubic-bezier(.16,1,.3,1) both;animation-delay:.1s}@keyframes canvasAppear{0%{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}.controls{display:flex;justify-content:space-around;padding:8px 12px calc(12px + var(--safe-bottom));background:var(--surface);border-top:1px solid var(--border)}.control-btn{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 16px;background:none;border:none;cursor:pointer;border-radius:14px;transition:all .2s cubic-bezier(.25,.46,.45,.94);position:relative;color:var(--text)}.control-btn:active:not(:disabled){background:var(--bg);transform:scale(.9);transition-duration:.1s}.control-btn:disabled{opacity:.4;cursor:not-allowed}.control-btn .icon{font-size:24px;line-height:1}.control-btn .label{font-size:11px;color:var(--text-secondary);font-weight:500}.control-btn .count{position:absolute;top:4px;right:8px;background:var(--primary);color:#fff;font-size:10px;font-weight:700;padding:2px 6px;border-radius:10px;line-height:1.2}.control-btn.active-mode{background:#3182f61a}.control-btn.active-mode .label{color:var(--primary);font-weight:600}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:100;animation:modalFadeIn .4s cubic-bezier(.16,1,.3,1) both;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--surface);padding:36px 28px 28px;border-radius:24px;text-align:center;max-width:320px;width:90%;animation:modalSlideUp .5s cubic-bezier(.16,1,.3,1) both;animation-delay:.05s;box-shadow:0 20px 60px #00000026}@keyframes modalSlideUp{0%{transform:translateY(40px) scale(.95);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}.modal-emoji{font-size:56px;margin-bottom:12px;animation:emojiBounce .7s cubic-bezier(.34,1.56,.64,1) both;animation-delay:.2s}@keyframes emojiBounce{0%{transform:scale(0) rotate(-10deg);opacity:0}50%{transform:scale(1.2) rotate(5deg)}to{transform:scale(1) rotate(0);opacity:1}}.modal-content h2{font-size:22px;font-weight:800;margin-bottom:4px}.puzzle-complete-name{font-size:14px;color:var(--text-secondary);margin-bottom:4px}.result-stats{display:flex;align-items:center;justify-content:center;gap:20px;margin:20px 0 24px;padding:16px;background:var(--bg);border-radius:14px}.result-stat{display:flex;flex-direction:column;gap:4px}.result-stat-value{font-size:18px;font-weight:700}.result-stat-label{font-size:12px;color:var(--text-secondary)}.result-divider{width:1px;height:32px;background:var(--border)}.modal-buttons{display:flex;gap:10px}.primary-btn{flex:1;padding:14px 20px;background:var(--primary);color:#fff;border:none;border-radius:14px;font-size:15px;font-weight:700;cursor:pointer;transition:all .2s cubic-bezier(.25,.46,.45,.94)}.primary-btn:active{background:var(--primary-dark);transform:scale(.96);transition-duration:.1s}.secondary-btn{flex:1;padding:14px 20px;background:var(--bg);color:var(--text);border:none;border-radius:14px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.25,.46,.45,.94)}.secondary-btn:active{background:var(--border);transform:scale(.96);transition-duration:.1s}.screen-transition{height:100%}.screen-transition.fade-in{animation:screenFadeIn .35s ease both}@keyframes screenFadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.tutorial-screen{display:flex;flex-direction:column;height:100%;max-width:500px;margin:0 auto;background:var(--surface);padding:0 24px;position:relative}.tutorial-skip{position:absolute;top:16px;right:20px;background:none;border:none;font-size:14px;font-weight:600;color:var(--text-secondary);cursor:pointer;padding:8px 12px;border-radius:8px;transition:color .2s,background .2s;z-index:2}.tutorial-skip:active{background:var(--bg);color:var(--text)}.tutorial-body{flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden}.tutorial-card{text-align:center;padding:20px 0;max-width:340px;width:100%}.tutorial-card.tutorial-slide-next{animation:tutorialSlideNext .35s ease both}.tutorial-card.tutorial-slide-prev{animation:tutorialSlidePrev .35s ease both}@keyframes tutorialSlideNext{0%{opacity:0;transform:translate(40px)}to{opacity:1;transform:translate(0)}}@keyframes tutorialSlidePrev{0%{opacity:0;transform:translate(-40px)}to{opacity:1;transform:translate(0)}}.tutorial-emoji{font-size:64px;margin-bottom:20px;animation:tutorialEmojiPop .4s ease both;animation-delay:.1s}@keyframes tutorialEmojiPop{0%{transform:scale(0);opacity:0}60%{transform:scale(1.15)}to{transform:scale(1);opacity:1}}.tutorial-title{font-size:22px;font-weight:800;letter-spacing:-.5px;margin-bottom:12px;color:var(--text)}.tutorial-desc{font-size:15px;line-height:1.6;color:var(--text-secondary);white-space:pre-line}.tutorial-example{margin-top:24px;display:flex;justify-content:center}.example-grid{display:inline-flex;flex-direction:column;gap:3px;background:var(--bg);padding:16px;border-radius:14px}.example-header{display:flex;gap:3px;padding-left:28px}.example-clue-col{width:32px;text-align:center;font-size:13px;font-weight:700;color:var(--text-secondary)}.example-row{display:flex;align-items:center;gap:3px}.example-clue-row{width:24px;text-align:right;font-size:13px;font-weight:700;color:var(--text-secondary);padding-right:4px}.example-cell{width:32px;height:32px;background:var(--surface);border-radius:6px;border:1px solid var(--border);transition:all .2s ease}.example-cell.filled{background:var(--text);border-color:var(--text);animation:exampleCellFill .4s ease both}.example-cell.filled:nth-child(2){animation-delay:.2s}.example-cell.filled:nth-child(3){animation-delay:.35s}.example-cell.filled:nth-child(4){animation-delay:.5s}@keyframes exampleCellFill{0%{background:var(--surface);border-color:var(--border);transform:scale(1)}50%{transform:scale(1.1)}to{background:var(--text);border-color:var(--text);transform:scale(1)}}.tutorial-dots{display:flex;justify-content:center;gap:8px;margin-bottom:24px}.tutorial-dot{width:8px;height:8px;border-radius:4px;background:var(--border);transition:all .3s ease}.tutorial-dot.active{width:24px;background:var(--primary)}.tutorial-nav{display:flex;justify-content:space-between;gap:12px;padding-bottom:calc(32px + var(--safe-bottom))}.tutorial-btn-primary{flex:1;padding:16px 24px;background:var(--primary);color:#fff;border:none;border-radius:14px;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s ease}.tutorial-btn-primary:active{background:var(--primary-dark);transform:scale(.97)}.tutorial-btn-secondary{padding:16px 24px;background:var(--bg);color:var(--text);border:none;border-radius:14px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease}.tutorial-btn-secondary:active{background:var(--border);transform:scale(.97)}@media(min-width:501px){.home-screen,.game-screen,.tutorial-screen{border-left:1px solid var(--border);border-right:1px solid var(--border)}}@media(max-height:700px){.home-header{padding:32px 20px 16px}.app-title{font-size:24px}.stats-bar{padding:16px;margin:12px 20px}.game-header{padding:8px 12px}.controls{padding:6px 8px calc(8px + var(--safe-bottom))}.control-btn{padding:8px 12px}}
